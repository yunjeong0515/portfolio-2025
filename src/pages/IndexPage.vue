<template>
  <q-page class="mainpage-container">
    <div id="pixel-container" class="pixel-container"></div>
    <div class="container-wrap">
      <div class="wrapper">
        <div class="title-wrap">
          <div class="sub-text">
            <span ref="subText" class="sub-text-content font_ibm"
              >ì‚¬ìš©ì ì¤‘ì‹¬ì˜ í¼ë¸”ë¦¬ì…”</span
            >
          </div>
          <div class="focus-keyword">
            <span ref="dynamicWord" class="dynamic-word font_900"
              >User-Centric</span
            >
          </div>
          <span class="font_ibm static-text text-r">Web Publisher.</span>
        </div>
        <div class="main-wrap">
          <div class="folder-list">
            <ul>
              <li>
                <router-link to="">
                  <div class="icon">
                    <svg
                      width="184"
                      height="154"
                      viewBox="0 0 184 154"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M82.8457 12.8299L75.9345 4.25572C74.1677 2.07321 71.4656 0.77417 68.5816 0.77417H9.68009C4.53559 0.800128 0.352539 4.87934 0.352539 9.89393V144.221C0.352539 149.236 4.53559 153.315 9.68009 153.315H173.861C179.031 153.315 183.188 149.236 183.188 144.221V25.4052C183.188 20.3906 179.005 16.3115 173.861 16.3115H90.1986C87.3406 16.3114 84.6385 15.0383 82.8457 12.8299Z"
                        fill="#279ACF"
                      />
                      <path
                        d="M20.2042 22.4158H163.364C169.497 22.4158 174.479 27.9239 174.479 34.7053V133.073C174.479 137.828 171.001 141.674 166.7 141.674H16.8672C12.5668 141.674 9.08887 137.828 9.08887 133.073V34.7053C9.08887 27.9239 14.0707 22.4158 20.2042 22.4158Z"
                        fill="white"
                      />
                      <path
                        d="M12.6753 34.4846H170.958C177.739 34.4846 183.248 39.9928 183.248 46.7742V145.142C183.248 149.897 179.402 153.742 174.648 153.742H8.98584C4.23108 153.742 0.385742 149.897 0.385742 145.142V46.7742C0.385742 39.9928 5.89392 34.4846 12.6753 34.4846Z"
                        fill="#5FC9F9"
                      />
                    </svg>
                  </div>
                  <span class="font_ibm font_500">ABOUT</span>
                </router-link>
              </li>
              <li>
                <router-link to="">
                  <div class="icon-wrapper" ref="folderItem">
                    <div class="icon folder-icon">
                      <svg
                        width="184"
                        height="154"
                        viewBox="0 0 184 154"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M82.8457 12.8299L75.9345 4.25572C74.1677 2.07321 71.4656 0.77417 68.5816 0.77417H9.68009C4.53559 0.800128 0.352539 4.87934 0.352539 9.89393V144.221C0.352539 149.236 4.53559 153.315 9.68009 153.315H173.861C179.031 153.315 183.188 149.236 183.188 144.221V25.4052C183.188 20.3906 179.005 16.3115 173.861 16.3115H90.1986C87.3406 16.3114 84.6385 15.0383 82.8457 12.8299Z"
                          fill="#279ACF"
                        />
                        <path
                          class="folder-center"
                          d="M20.2042 22.4158H163.364C169.497 22.4158 174.479 27.9239 174.479 34.7053V133.073C174.479 137.828 171.001 141.674 166.7 141.674H16.8672C12.5668 141.674 9.08887 137.828 9.08887 133.073V34.7053C9.08887 27.9239 14.0707 22.4158 20.2042 22.4158Z"
                          fill="white"
                        />
                        <path
                          class="folder-front"
                          ref="folderFront"
                          d="M12.6753 34.4846H170.958C177.739 34.4846 183.248 39.9928 183.248 46.7742V145.142C183.248 149.897 179.402 153.742 174.648 153.742H8.98584C4.23108 153.742 0.385742 149.897 0.385742 145.142V46.7742C0.385742 39.9928 5.89392 34.4846 12.6753 34.4846Z"
                          fill="#5FC9F9"
                        />
                      </svg>
                    </div>

                    <div class="drop-icons">
                      <div class="drop-icon" data-index="0">ğŸ“„</div>
                      <div class="drop-icon" data-index="1">ğŸ’»</div>
                      <div class="drop-icon" data-index="2">âœ¨</div>
                    </div>
                  </div>
                  <span class="font_ibm font_500">WORK</span>
                </router-link>
              </li>
            </ul>
          </div>
        </div>
        <div class="dock-wrap">
          <ul>
            <li>
              <button>
                <div class="icon">
                  <img
                    src="../assets/imgs/index/terminal.png"
                    alt="terminal icon"
                  />
                </div>
              </button>
            </li>
            <li>
              <button>
                <div class="icon">
                  <img
                    src="../assets/imgs/index/terminal.png"
                    alt="terminal icon"
                  />
                </div>
              </button>
            </li>
            <li>
              <button>
                <div class="icon">
                  <img
                    src="../assets/imgs/index/terminal.png"
                    alt="terminal icon"
                  />
                </div>
              </button>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </q-page>
</template>

<script>
import { defineComponent, onMounted, onBeforeUnmount, ref } from "vue";
import gsap from "gsap"; // GSAP import ì¶”ê°€
import pixelEffect from "src/assets/js/stacking-pixels.js";

export default defineComponent({
  name: "IndexPage",

  // [ìˆ˜ì •] setup() í•¨ìˆ˜ì— refë¥¼ ì •ì˜í•˜ê³  ë°˜í™˜í•˜ì—¬ í…œí”Œë¦¿ì˜ refì™€ ì—°ê²°
  setup() {
    // í…œí”Œë¦¿ì—ì„œ ref="folderItem"ê³¼ ref="folderFront"ë¥¼ ì—°ê²°
    const folderItem = ref(null);
    const folderFront = ref(null);

    // GSAP Timeline ê°ì²´ë¥¼ ì €ì¥í•  ë³€ìˆ˜
    const folderTimeline = ref(null);

    return { folderItem, folderFront, folderTimeline };
  },

  data() {
    return {
      wordPairs: [
        { sub: "ê°•ë ¥í•œ ì„±ëŠ¥ì˜ í¼ë¸”ë¦¬ì…”", main: "Performant" },
        { sub: "ìœ ì—°í•œ ë°˜ì‘í˜• í¼ë¸”ë¦¬ì…”", main: "Responsive" },
        { sub: "êµ¬ì¡°ì ì¸ ì‹œë§¨í‹± í¼ë¸”ë¦¬ì…”", main: "Semantic" },
        { sub: "ìƒë™ê° ë„˜ì¹˜ëŠ” í¼ë¸”ë¦¬ì…”", main: "Interactive" },
        { sub: "ëª¨ë‘ë¥¼ ìœ„í•œ í¼ë¸”ë¦¬ì…”", main: "Accessible" },
      ],
    };
  },

  methods: {
    // [ì¶”ê°€] í´ë” ì—´ë¦¼ ë° ì•„ì´ì½˜ ë“œë¡­ íš¨ê³¼ ì´ˆê¸°í™”
    // initFolderHoverEffect() {
    //   const wrapper = this.$refs.folderItem;
    //   const front = this.$refs.folderFront; // SVG path for the front flap
    //   // wrapper ë‚´ë¶€ì— ìˆëŠ” drop-iconsë¥¼ ì°¾ìŠµë‹ˆë‹¤.
    //   const dropIconsWrapper = wrapper.querySelector(".drop-icons");
    //   if (!dropIconsWrapper) return;
    //   const dropIcons = dropIconsWrapper.querySelectorAll(".drop-icon");
    //   // Timeline ìƒì„± ë° ìƒíƒœ ì„¤ì •
    //   const tl = gsap.timeline({
    //     paused: true,
    //     reversed: true,
    //   });
    //   this.folderTimeline = tl; // íƒ€ì„ë¼ì¸ì„ refì— ì €ì¥
    //   // ë“œë¡­ ì•„ì´ì½˜ ì´ˆê¸° ìƒíƒœ ì„¤ì • (í™”ë©´ì— ë³´ì´ì§€ ì•Šê²Œ)
    //   gsap.set(dropIcons, {
    //     opacity: 0,
    //     y: 0, // ì´ˆê¸° y ìœ„ì¹˜ëŠ” 0ìœ¼ë¡œ ë‘ê±°ë‚˜ CSSë¡œ ì¡°ì •
    //     scale: 0.5,
    //   });
    //   // --- 1. í´ë” ì—´ë¦¼ ì• ë‹ˆë©”ì´ì…˜ ---
    //   tl.to(
    //     front,
    //     {
    //       duration: 0.4,
    //       transformOrigin: "50% 100%",
    //       rotationX: 30,
    //       z: -10,
    //       ease: "power2.out",
    //     },
    //     0
    //   );
    //   // --- 2. ì•„ì´ì½˜ ë“œë¡­ ì• ë‹ˆë©”ì´ì…˜ (0.2ì´ˆ í›„ ì‹œì‘) ---
    //   tl.fromTo(
    //     dropIcons,
    //     {
    //       y: -50, // ìœ„ì—ì„œ ì‹œì‘
    //       opacity: 0,
    //       scale: 0.5,
    //     },
    //     {
    //       y: 60, // ì•„ë˜ë¡œ ë–¨ì–´ì§€ëŠ” ìµœì¢… ìœ„ì¹˜ (í´ë” ë°–ìœ¼ë¡œ ì¶©ë¶„íˆ)
    //       opacity: 1,
    //       scale: 1,
    //       stagger: 0.1, // ìˆœì°¨ì ìœ¼ë¡œ ë–¨ì–´ì§€ê²Œ
    //       ease: "bounce.out", // íŠ•ê¸°ëŠ” íš¨ê³¼
    //       duration: 0.8,
    //     },
    //     0.2
    //   ); // í´ë”ê°€ ì—´ë¦° í›„ 0.2ì´ˆ ë’¤ ë“œë¡­ ì‹œì‘
    //   // --- 3. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡ ---
    //   const listItem = wrapper.closest("li"); // li ìš”ì†Œ ì°¾ê¸°
    //   if (listItem) {
    //     listItem.addEventListener("mouseenter", () => tl.play());
    //     listItem.addEventListener("mouseleave", () => tl.reverse());
    //   }
    // },
  },

  mounted() {
    pixelEffect();
    // [ì¶”ê°€] í´ë” í˜¸ë²„ íš¨ê³¼ ì´ˆê¸°í™”
    // refê°€ DOMì— ë§ˆìš´íŠ¸ëœ í›„ ì‹¤í–‰
    if (this.$refs.folderItem) {
      this.initFolderHoverEffect();
    }
  },

  beforeUnmount() {
    // [ì¶”ê°€] ì»´í¬ë„ŒíŠ¸ í•´ì œ ì‹œ íƒ€ì„ë¼ì¸ ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì •ë¦¬
    if (this.folderTimeline) {
      this.folderTimeline.kill();
    }
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆëŠ” ìë™ìœ¼ë¡œ ì •ë¦¬ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ, cleanupIntervalê³¼ ìœ ì‚¬í•˜ê²Œ ëª…ì‹œì  ì œê±° ë¡œì§ì´ í•„ìš”í•˜ì§€ë§Œ,
    // í˜„ì¬ëŠ” ì»´í¬ë„ŒíŠ¸ ìì²´ë¥¼ ì–¸ë§ˆìš´íŠ¸í•˜ëŠ” ê²½ìš°ê°€ í”ì¹˜ ì•Šìœ¼ë¯€ë¡œ ìƒëµí•˜ê³ , GSAP íƒ€ì„ë¼ì¸ killë§Œ í•©ë‹ˆë‹¤.
  },
});
</script>
